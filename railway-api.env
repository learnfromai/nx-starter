# Railway Environment Configuration for API Service
# Copy this to your Railway project environment variables

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=production
ENVIRONMENT=production
PORT=${{RAILWAY_PORT}}
HOST=0.0.0.0

# =============================================================================
# DATABASE CONFIGURATION (Railway PostgreSQL)
# =============================================================================
DB_TYPE=postgresql
DB_ORM=typeorm
DATABASE_URL=${{DATABASE_URL}}

# Database Pool Configuration
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_ACQUIRE_TIMEOUT=60000
DB_POOL_CREATE_TIMEOUT=30000
DB_POOL_DESTROY_TIMEOUT=5000
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_REAP_INTERVAL=1000

# Database SSL Configuration
DB_SSL_ENABLED=true
DB_SSL_REJECT_UNAUTHORIZED=false

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# CORS Configuration (update with your domains)
CORS_ORIGIN=${{RAILWAY_STATIC_URL}}
CORS_CREDENTIALS=true

# JWT Configuration (SET THESE IN RAILWAY SECRETS)
JWT_SECRET=${{JWT_SECRET}}
JWT_EXPIRES_IN=24h
JWT_ISSUER=nx-starter-api
JWT_AUDIENCE=nx-starter-web
JWT_ALGORITHM=HS256

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_SKIP_SUCCESSFUL=false
RATE_LIMIT_SKIP_FAILED=false

# Request Security
REQUEST_SIZE_LIMIT=10mb

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME=Nx Starter API
APP_VERSION=1.0.0
APP_DESCRIPTION=A modern task management API built with Express.js
APP_AUTHOR=Nx Starter Team
APP_HOMEPAGE=https://github.com/learnfromai/nx-starter
APP_REPOSITORY=https://github.com/learnfromai/nx-starter.git
APP_LICENSE=MIT
APP_STARTUP_MESSAGE=ðŸš€ Nx Starter API Server running on port
APP_HEALTH_MESSAGE=Server is running

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_PREFIX=/api
API_VERSION=v1
API_TIMEOUT=30000

# API Endpoints
API_HEALTH_ENDPOINT=/health
API_TODOS_ENDPOINT=/todos
API_AUTH_BASE=/auth
API_AUTH_LOGIN=/auth/login
API_AUTH_REGISTER=/auth/register
API_AUTH_LOGOUT=/auth/logout
API_AUTH_REFRESH=/auth/refresh
API_AUTH_ME=/auth/me
API_DOCS_ENDPOINT=/docs

# Pagination
API_DEFAULT_PAGE_SIZE=20
API_MAX_PAGE_SIZE=100

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_ENABLE_COLORS=false
LOG_ENABLE_TIMESTAMP=true

# Request Logging
LOG_REQUESTS_ENABLED=true
LOG_REQUESTS_FORMAT=:method :url - :status - :response-time ms

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Metrics
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics
METRICS_COLLECT_DEFAULT=true

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_EXTERNAL=false

# Tracing
TRACING_ENABLED=false
TRACING_SERVICE_NAME=nx-starter-api

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_ENABLED=false
CACHE_PROVIDER=memory

# Cache TTL Configuration (in seconds)
CACHE_TTL_DEFAULT=300
CACHE_TTL_SHORT=60
CACHE_TTL_MEDIUM=900
CACHE_TTL_LONG=3600