# =============================================================================
# RAILWAY PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# This file contains environment variables for Railway.com deployment
# Copy and set these variables in your Railway service configuration

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=$PORT
HOST=0.0.0.0
NODE_ENV=production
ENVIRONMENT=production
SHUTDOWN_TIMEOUT=10000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# CORS Configuration - Update with your Railway web app domain
CORS_ORIGIN=https://your-web-app.railway.app
CORS_CREDENTIALS=true

# JWT Configuration - Use strong secrets in production
JWT_SECRET=your-super-secure-jwt-secret-at-least-32-characters-long
JWT_EXPIRES_IN=24h
JWT_ISSUER=your-api-domain.railway.app
JWT_AUDIENCE=your-web-app.railway.app
JWT_ALGORITHM=HS256

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL=false
RATE_LIMIT_SKIP_FAILED=false

# Request Security
REQUEST_SIZE_LIMIT=10mb

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# For Railway PostgreSQL database:
# DB_TYPE=postgresql
# DB_ORM=typeorm
# DATABASE_URL=$DATABASE_URL

# For Railway MySQL database:
# DB_TYPE=mysql
# DB_ORM=typeorm
# DATABASE_URL=$DATABASE_URL

# For Railway Redis (if using caching):
# CACHE_ENABLED=true
# CACHE_PROVIDER=redis
# REDIS_URL=$REDIS_URL

# Default to SQLite for simplicity (files stored in Railway volume)
DB_TYPE=sqlite
DB_ORM=native
DATABASE_URL=./data/todos.db

# Database Pool Configuration
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_ACQUIRE_TIMEOUT=60000
DB_POOL_CREATE_TIMEOUT=30000
DB_POOL_DESTROY_TIMEOUT=5000
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_REAP_INTERVAL=1000

# Database SSL Configuration (for PostgreSQL/MySQL)
DB_SSL_ENABLED=true
DB_SSL_REJECT_UNAUTHORIZED=false

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME=Nx Starter API
APP_VERSION=1.0.0
APP_DESCRIPTION=A modern task management API deployed on Railway
APP_AUTHOR=Nx Starter Team
APP_HOMEPAGE=https://your-web-app.railway.app
APP_REPOSITORY=https://github.com/your-org/nx-starter
APP_LICENSE=MIT
APP_STARTUP_MESSAGE=ðŸš€ Nx Starter API running on Railway port
APP_HEALTH_MESSAGE=Server is running on Railway

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_PREFIX=/api
API_VERSION=v1
API_TIMEOUT=30000

# API Endpoints
API_HEALTH_ENDPOINT=/health
API_TODOS_ENDPOINT=/todos
API_AUTH_BASE=/auth
API_AUTH_LOGIN=/auth/login
API_AUTH_REGISTER=/auth/register
API_AUTH_LOGOUT=/auth/logout
API_AUTH_REFRESH=/auth/refresh
API_AUTH_ME=/auth/me
API_DOCS_ENDPOINT=/docs

# Pagination
API_DEFAULT_PAGE_SIZE=20
API_MAX_PAGE_SIZE=100

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_ENABLE_COLORS=false
LOG_ENABLE_TIMESTAMP=true

# Request Logging
LOG_REQUESTS_ENABLED=true
LOG_REQUESTS_FORMAT=:method :url - :status - :response-time ms

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Metrics
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics
METRICS_COLLECT_DEFAULT=true

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_EXTERNAL=false

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_ENABLED=false
CACHE_PROVIDER=memory

# Cache TTL Configuration (in seconds)
CACHE_TTL_DEFAULT=300
CACHE_TTL_SHORT=60
CACHE_TTL_MEDIUM=900
CACHE_TTL_LONG=3600