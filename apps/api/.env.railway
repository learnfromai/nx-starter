# =============================================================================
# RAILWAY PRODUCTION ENVIRONMENT CONFIGURATION
# Copy these values to your Railway project environment variables
# =============================================================================

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=3000
HOST=0.0.0.0
NODE_ENV=production
ENVIRONMENT=production
SHUTDOWN_TIMEOUT=10000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# CORS Configuration
CORS_ORIGIN=https://your-web-app.railway.app
CORS_CREDENTIALS=true

# JWT Configuration (REQUIRED: Set strong production values)
JWT_SECRET=change-me-to-a-secure-32-character-secret
JWT_EXPIRES_IN=24h
JWT_ISSUER=nx-starter-api
JWT_AUDIENCE=nx-starter-web
JWT_ALGORITHM=HS256

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_SKIP_SUCCESSFUL=false
RATE_LIMIT_SKIP_FAILED=false

# Request Security
REQUEST_SIZE_LIMIT=10mb

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database type: memory | sqlite | mysql | postgresql | mongodb
DB_TYPE=sqlite

# ORM selection: native | typeorm | sequelize | mongoose
DB_ORM=native

# Production Database URL (configure based on your Railway database)
# DATABASE_URL=postgresql://username:password@hostname:port/database
# DATABASE_URL=mysql://username:password@hostname:port/database
# DATABASE_URL=mongodb://username:password@hostname:port/database

# SQLite Configuration (default for Railway)
DB_NAME=production_app

# Database Pool Configuration
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_ACQUIRE_TIMEOUT=60000
DB_POOL_CREATE_TIMEOUT=30000
DB_POOL_DESTROY_TIMEOUT=5000
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_REAP_INTERVAL=1000

# Database SSL Configuration
DB_SSL_ENABLED=true
DB_SSL_REJECT_UNAUTHORIZED=true

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME=NX Starter API
APP_VERSION=1.0.0
APP_DESCRIPTION=Production API server for NX Starter
APP_STARTUP_MESSAGE=ðŸš€ NX Starter API running on Railway
APP_HEALTH_MESSAGE=Server is healthy

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_PREFIX=/api
API_VERSION=v1
API_TIMEOUT=30000

# API Endpoints
API_HEALTH_ENDPOINT=/health
API_TODOS_ENDPOINT=/todos
API_AUTH_BASE=/auth
API_AUTH_LOGIN=/auth/login
API_AUTH_REGISTER=/auth/register
API_AUTH_LOGOUT=/auth/logout
API_AUTH_REFRESH=/auth/refresh
API_AUTH_ME=/auth/me
API_DOCS_ENDPOINT=/docs

# Pagination
API_DEFAULT_PAGE_SIZE=20
API_MAX_PAGE_SIZE=100

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_ENABLE_COLORS=false
LOG_ENABLE_TIMESTAMP=true
LOG_MAX_FILE_SIZE=20m
LOG_MAX_FILES=14
LOG_DATE_PATTERN=YYYY-MM-DD

# Request Logging
LOG_REQUESTS_ENABLED=true
LOG_REQUESTS_FORMAT=:method :url - :status - :response-time ms

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Metrics
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics
METRICS_COLLECT_DEFAULT=true

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_EXTERNAL=false

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_ENABLED=true
CACHE_PROVIDER=memory

# Cache TTL Configuration (in seconds)
CACHE_TTL_DEFAULT=300
CACHE_TTL_SHORT=60
CACHE_TTL_MEDIUM=900
CACHE_TTL_LONG=3600

# =============================================================================
# RAILWAY-SPECIFIC CONFIGURATION
# =============================================================================

# Railway automatically provides these variables:
# - PORT (automatically set by Railway)
# - RAILWAY_DEPLOYMENT_ID
# - RAILWAY_DEPLOYMENT_DOMAIN
# - RAILWAY_ENVIRONMENT
# - RAILWAY_PROJECT_ID
# - RAILWAY_SERVICE_ID

# Use Railway's provided PORT variable
# PORT is automatically set by Railway, no need to override

# =============================================================================
# EXAMPLE PRODUCTION CONFIGURATIONS
# =============================================================================

# PostgreSQL on Railway
# DB_TYPE=postgresql
# DB_ORM=typeorm
# DATABASE_URL=${{ Postgres.DATABASE_URL }}

# MySQL on Railway
# DB_TYPE=mysql
# DB_ORM=sequelize
# DATABASE_URL=${{ MySQL.DATABASE_URL }}

# MongoDB Atlas
# DB_TYPE=mongodb
# DATABASE_URL=mongodb+srv://username:password@cluster.mongodb.net/database?retryWrites=true&w=majority

# Redis Cache (if using Railway Redis)
# CACHE_PROVIDER=redis
# REDIS_URL=${{ Redis.REDIS_URL }}
# CACHE_ENABLED=true